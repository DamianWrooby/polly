(this.webpackJsonppolly=this.webpackJsonppolly||[]).push([[0],{103:function(e,a,t){e.exports={Wrapper:"Button_Wrapper__QmTcQ",Box:"Button_Box__2imEP",FrontBtn:"Button_FrontBtn__1_xKy"}},104:function(e,a,t){e.exports={Results:"Results_Results__2iKBZ",Content:"Results_Content__2i24J",Measurements:"Results_Measurements__3u5QI"}},105:function(e,a,t){e.exports={MeasurementInfo:"MeasurementInfo_MeasurementInfo__ViLpV",LocationLabel:"MeasurementInfo_LocationLabel__1-JH5"}},106:function(e,a,t){e.exports={MeasurementCircle:"MeasurementCircle_MeasurementCircle__2GR0W",Label:"MeasurementCircle_Label__3cQkE",Tooltip:"MeasurementCircle_Tooltip__3b9D8","chartjs-render-monitor":"MeasurementCircle_chartjs-render-monitor__1dgUW"}},107:function(e,a,t){e.exports={Wrapper:"NotFound_Wrapper__2ch6H",Heading:"NotFound_Heading__1mLti",Subheading:"NotFound_Subheading__2lYrG"}},118:function(e,a,t){e.exports={NavigationItem:"NavigationItem_NavigationItem__2SpXc"}},121:function(e,a,t){e.exports={Topbar:"Topbar_Topbar__2WmOK",Watermark:"Topbar_Watermark__3HIvQ"}},122:function(e,a,t){e.exports={Front:"Front_Front__3AH4P",Wrapper:"Front_Wrapper__78Riz"}},123:function(e,a,t){e.exports={About:"About_About__scHdH",Credits:"About_Credits__2_w3X"}},154:function(e,a,t){e.exports={NavigationItems:"NavigationItems_NavigationItems__1fnFX"}},158:function(e,a,t){e.exports={ErrorMessage:"ErrorMessage_ErrorMessage__3tVxx"}},160:function(e,a,t){e.exports={WeatherCircle:"WeatherCircle_WeatherCircle__2kwP8"}},163:function(e,a,t){e.exports={FrontMap:"FrontMap_FrontMap__pu9vl",Heading:"FrontMap_Heading__1G8lp"}},181:function(e,a,t){e.exports=t(306)},186:function(e,a,t){},305:function(e,a,t){},306:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),l=t(152),o=t.n(l),c=(t(186),t(92)),i=t(24),s=t(118),u=t.n(s),m=function(e){var a=e.link,t=e.exact,n=e.children;return r.a.createElement("li",{className:u.a.NavigationItem},r.a.createElement(c.b,{to:a,activeClassName:u.a.active,exact:t},n))};m.defaultProps={children:null,exact:!1};var d=m,p=t(103),_=t.n(p),b=function(e){var a,t=e.type,n=e.icon,l=e.disabled,o=e.clicked,c=e.ariaLabel;return a="front"===e.addClass?_.a.FrontBtn:null,r.a.createElement("button",{type:t,disabled:l,onClick:o,"aria-label":c,className:a},r.a.createElement("div",{className:_.a.Wrapper},r.a.createElement("div",{className:_.a.Box},r.a.createElement("i",{className:n,"aria-hidden":"true"}))))};b.defaultProps={disabled:!1,type:"button",clicked:null,addClass:null};var f=b,v=t(154),h=t.n(v),E=function(){return r.a.createElement("ul",{className:h.a.NavigationItems},r.a.createElement(d,{link:"/polly",exact:!0},r.a.createElement(f,{icon:"fa fa-search",type:"button",ariaLabel:"search"})),r.a.createElement(d,{link:"/about"},r.a.createElement(f,{icon:"fa fa-info",type:"button",ariaLabel:"about"})))},g=t(121),N=t.n(g),x=function(){return r.a.createElement("header",{className:N.a.Topbar},r.a.createElement("div",{className:N.a.Watermark},"Polly"),r.a.createElement("nav",null,r.a.createElement(E,null)))},y=t(83),w=t.n(y),j=function(e){var a=e.children;return r.a.createElement("div",{className:w.a.Wrapper},r.a.createElement("main",{className:w.a.Main},r.a.createElement(x,null),r.a.createElement("div",{className:w.a.Curved},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"},r.a.createElement("path",{fill:"rgb(246, 251, 253)",fillOpacity:"1",d:"M0,128L60,154.7C120,181,240,235,360,240C480,245,600,203,720,186.7C840,171,960,181,1080,202.7C1200,224,1320,256,1380,272L1440,288L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"}))),r.a.createElement("section",{className:w.a.Content},a)))},O=t(73),k=t(155),C=t(32),L=t(66),M=t.n(L),I=t(104),B=t.n(I),T=t(156),W=t(157),S=t(166),R=t(165),A=t(158),P=t.n(A),F=function(e){var a=e.textElement,t=e.action,n=[P.a.ErrorMessage,"animate__animated","animate__bounceInDown","animate__fast"];return r.a.createElement("div",{className:n.join(" ")},a,r.a.createElement(f,{clicked:t,icon:"fa fa-step-backward",type:"button",ariaLabel:"Back to the search"}))},H=function(e,a){return function(t){Object(S.a)(l,t);var n=Object(R.a)(l);function l(e){var a;return Object(T.a)(this,l),(a=n.call(this,e)).goBackHandler=function(e){e.preventDefault(),window.location.reload(!1)},a.state={error:null},a}return Object(W.a)(l,[{key:"componentDidMount",value:function(){var e=this;this.reqInterceptor=a.interceptors.request.use((function(a){return e.setState({error:null}),a})),this.resInterceptor=a.interceptors.response.use((function(e){return e}),(function(a){e.setState({error:a},(function(){var a=e.state.error;console.log(a)}))}))}},{key:"componentWillUnmount",value:function(){a.interceptors.request.eject(this.reqInterceptor),a.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){var a=this.state.error?r.a.createElement(r.a.Fragment,null,r.a.createElement(F,{textElement:r.a.createElement("p",null,this.state.error.message,r.a.createElement("br",null),"Try to search another loaction."),action:this.goBackHandler})):null;return r.a.createElement(r.a.Fragment,null,a,r.a.createElement(e,this.props))}}]),l}(n.Component)},D=t(67),V=t.n(D),G=function(){return r.a.createElement("div",{className:V.a.Loader},r.a.createElement("div",{className:[V.a.Circle,V.a.One].join(" ")}),r.a.createElement("div",{className:[V.a.Circle,V.a.Two].join(" ")}),r.a.createElement("div",{className:[V.a.Circle,V.a.Three].join(" ")}))},Q=t(105),U=t.n(Q),K=function(e){var a,t=e.location,n=e.from,l=e.till;a=t.street?"".concat(t.street,", ").concat(t.adminArea5,", ").concat(t.adminArea1):"".concat(t.adminArea5,", ").concat(t.adminArea1);var o=new Date(n),c=new Date(l),i=o.toLocaleString().split(":");i.pop();var s=i.join(":"),u=c.toLocaleString().split(" ");u.shift();var m=u[0].split(":");m.pop();var d=m.join(":"),p="".concat(s," - ").concat(d);return r.a.createElement("div",{className:[U.a.MeasurementInfo,"animate__animated","animate__bounceInDown"].join(" ")},r.a.createElement("p",null,r.a.createElement("span",{className:U.a.LocationLabel},"Location:"),r.a.createElement("br",null)," ",a),r.a.createElement("p",null,r.a.createElement("span",{className:U.a.LocationLabel},"Measurement time:"),r.a.createElement("br",null)," ",p))},Y=t(106),q=t.n(Y),J=t(159),z=function(e){var a=e.chartData,t=e.width,n=e.height,l=e.options;return r.a.createElement(J.Doughnut,{data:a,width:t,height:n,options:l})},Z=t(84),X=t.n(Z),$=function(e){var a=e.label,t=e.value,n=e.maxValue,l=n?r.a.createElement("p",{className:X.a.Norm},"WHO norm:",n," \xb5g/m\xb3"):r.a.createElement("p",{className:X.a.Norm},"WHO norm: none");return r.a.createElement("div",null,r.a.createElement("p",{className:X.a.Label},a," "),r.a.createElement("p",{className:X.a.Value},t," "),l)};$.defaultProps={maxValue:null};var ee=$,ae=function(e){var a=e.label,t=e.value,n=e.maxValue,l=n?t/n*100:null,o="#6eb6ff",c="#90f2ff";l>30?o="#ff6200":l>60?o="#ff4000":l>100&&(c="#ff0000");var i={datasets:[{data:[t,n-t],backgroundColor:[o,c],borderWidth:0}],labels:["Current","Norm"],backgroundColor:["#000124","#123411"],options:{tooltips:{enabled:!1},responsive:!0,cutoutPercentage:90,legend:{display:!1}}};return r.a.createElement("div",{className:q.a.MeasurementCircle},r.a.createElement("div",{className:q.a.Tooltip},r.a.createElement(ee,{label:a,value:t,maxValue:n})),r.a.createElement("h2",{className:q.a.Label},a),r.a.createElement(z,{chartData:i,width:90,height:90,options:i.options}))};ae.defaultProps={maxValue:null};var te=ae,ne=t(160),re=t.n(ne),le=function(e){var a,t,n=e.label,l=e.value;switch(n){case"TEMPERATURE":a="\xb0C";break;case"HUMIDITY":a="%";break;case"PRESSURE":a="hPa";break;case"WIND":a="km/h";break;default:a=""}switch(n){case"TEMPERATURE":t="fa fa-thermometer-half";break;case"HUMIDITY":t="fa fa-tint";break;case"PRESSURE":t="fa fa-arrow-down";break;default:t=""}var o="".concat(l).concat(a);return r.a.createElement("div",{className:re.a.WeatherCircle},r.a.createElement("i",{className:t,"aria-hidden":"true"}),r.a.createElement("p",null,o))},oe=t(57),ce=t.n(oe),ie=function(e){var a,t=e.type,n=e.label,l=e.data,o=e.tip,c=[];switch(t){case"pollution":Object.keys(l).forEach((function(e){null!==l[e].value&&c.push({label:e,value:l[e].value,maxValue:l[e].maxValue})}));var i=[ce.a.MeasurementBox,"animate__animated","animate__bounceInUp"],s=[ce.a.Circles,ce.a.Pollution];c.length>3&&s.push(ce.a.Wrap),a=0!==c.length?r.a.createElement("div",{className:i.join(" ")},r.a.createElement("h2",{className:ce.a.Label},n),r.a.createElement("p",{className:ce.a.Tip},o),r.a.createElement("div",{className:s.join(" ")},c.map((function(e){return r.a.createElement(te,{key:e.label,label:e.label,value:e.value,maxValue:e.maxValue})})))):null;break;case"weather":Object.keys(l).forEach((function(e){null!==l[e].value&&c.push({label:e,value:l[e].value})})),a=0!==c.length?r.a.createElement("div",{className:ce.a.MeasurementBox},r.a.createElement("div",{className:ce.a.Label},n),r.a.createElement("div",{className:ce.a.Circles},c.map((function(e){return r.a.createElement(le,{key:e.label,label:e.label,value:e.value})})))):null;break;default:a=r.a.createElement("p",null,"No measurement content")}return r.a.createElement(r.a.Fragment,null,a)};ie.defaultProps={data:null,tip:""};var se=ie,ue=t(58),me=t.n(ue),de=function(e){var a,t=e.index,n=t?r.a.createElement("div",{className:me.a.Index},r.a.createElement("p",null,r.a.createElement("span",null,"Pollution level: "),t.level.toLowerCase().replace("_"," "))):null,l=[me.a.AirQualityBox,"animate__animated","animate__bounceInDown","animate__fast"];switch(t.level){case"VERY_LOW":a="Take a deep breath!",l.push(me.a.GradientLow);break;case"LOW":a="You can go for a walk.",l.push(me.a.GradientLow);break;case"MEDIUM":a="You can go for a walk but you should not.",l.push(me.a.GradientMedium);break;case"HIGH":a="Better stay at home.",l.push(me.a.GradientHigh);break;case"VERY_HIGH":a="Stay at home and close all of the windows",l.push(me.a.GradientHigh);break;case"UNKNOWN":a="Sorry. No sensors in this area.",l.push(me.a.GradientLow);break;default:a=""}var o=r.a.createElement("div",{className:me.a.Advice},r.a.createElement("p",null,a));return r.a.createElement("div",{className:l.join(" ")},n,o)};var pe=H((function(e){var a=Object(n.useState)({}),t=Object(C.a)(a,2),l=t[0],o=t[1],c=Object(n.useState)(""),i=Object(C.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(""),d=Object(C.a)(m,2),p=d[0],_=d[1],b=Object(n.useState)({}),f=Object(C.a)(b,2),v=f[0],h=f[1],E=Object(n.useState)({}),g=Object(C.a)(E,2),N=g[0],x=g[1],y=Object(n.useState)({}),w=Object(C.a)(y,2),j=w[0],L=w[1],I=Object(n.useState)({}),T=Object(C.a)(I,2),W=T[0],S=T[1],R=Object(n.useState)(!0),A=Object(C.a)(R,2),P=A[0],H=A[1],D=Object(n.useState)(!1),V=Object(C.a)(D,2),Q=V[0],U=V[1],Y=e.location.search;Object(n.useEffect)((function(){var e,a=new URLSearchParams(Y),t={},n=Object(k.a)(a.entries());try{for(n.s();!(e=n.n()).done;){var r=e.value,l=Object(C.a)(r,2);t[r[0]]=l[1]}}catch(s){n.e(s)}finally{n.f()}var c=M.a.get("https://www.mapquestapi.com/geocoding/v1/reverse?key=".concat("xyDRoBak7eftOCqBEbiRd30Qm0u9K2Nr","&location=").concat(t.lat,",").concat(t.lng)),i=M.a.get("https://airapi.airly.eu/v2/measurements/nearest?lat=".concat(t.lat,"&lng=").concat(t.lng,"&maxDistanceKM=").concat("1000","&apikey=").concat("E5uVHwAJDcdy1YKj9x05zTgKtaxMKgAk"));M.a.all([c,i]).then(M.a.spread((function(){var e=arguments.length<=0?void 0:arguments[0],a=arguments.length<=1?void 0:arguments[1],t={};t=e.data.results[0].locations,o(t[0]);var n=a.data.current.indexes[0];h(n);var r={from:"",till:""};r.from=a.data.current.fromDateTime,r.till=a.data.current.tillDateTime,u(r.from),_(r.till);for(var l=a.data.current.values,c={},i=0;i<l.length;i+=1)c[l[i].name]=l[i].value;var s={dust:{PM1:{value:null,maxValue:null},PM25:{value:null,maxValue:25},PM10:{value:null,maxValue:50}},gases:{NO2:{value:null,maxValue:200},SO2:{value:null,maxValue:350},CO:{value:null,maxValue:3e4},O3:{value:null,maxValue:100}},weather:{TEMPERATURE:{value:null},HUMIDITY:{value:null},PRESSURE:{value:null}}},m=Object(O.a)({},s.dust),d=Object(O.a)({},s.gases),p=Object(O.a)({},s.weather),b=[m,d,p];b.forEach((function(e){Object.keys(e).forEach((function(a){Object.keys(c).forEach((function(t){a===t&&(e[a].value=c[t])}))}))})),s={dust:m,gases:d,weather:p},H(!1),x(Object(O.a)({},s.dust)),L(Object(O.a)({},s.gases)),S(Object(O.a)({},s.weather))}))).catch((function(e){H(!1),U(!0),console.log(e)}))}),[Y]);var q=r.a.createElement("div",{className:B.a.Content},r.a.createElement(K,{location:l,till:p,from:s}),r.a.createElement(de,{index:v}),r.a.createElement("div",{className:[B.a.Measurements,"animate__animated","animate__bounceInUp"].join(" ")},r.a.createElement(se,{type:"pollution",label:"Dust",data:N,tip:"Tap for more information"}),r.a.createElement(se,{type:"pollution",label:"Gases",data:j,tip:"Tap for more information"}),r.a.createElement(se,{type:"weather",label:"Weather",data:W})));return P?q=r.a.createElement(G,null):Q&&(q=r.a.createElement(F,{textElement:r.a.createElement("p",null,"Cannot find this location.",r.a.createElement("br",null),"Try another one."),action:function(a){a.preventDefault(),e.history.goBack()}})),r.a.createElement("div",{className:B.a.Results},q)}),M.a),_e=t(78),be=t.n(_e),fe=function(e){var a,t=e.value,n=e.changed,l=e.blured,o=e.label,c=e.invalid,i=e.validationFeedback,s=e.fieldId,u=[],m=[be.a.Feedback];return c&&(u.push(be.a.Invalid),m.push(be.a.In)),a=r.a.createElement("input",{className:u.join(" "),value:t,onChange:n,onBlur:l}),r.a.createElement("div",{className:[be.a.Input]},r.a.createElement("label",{htmlFor:s},r.a.createElement("span",{className:be.a.Label},o)),a,r.a.createElement("p",{className:m.join(" ")},i))};fe.defaultProps={label:"",invalid:!1,validationFeedback:""};var ve=fe,he=(t(301),t(124)),Ee=t(101),ge=t(4),Ne=t(164),xe=t(163),ye=t.n(xe),we=Object(i.f)((function(e){var a=Object(n.useRef)(null),t=e.history;return Object(n.useEffect)((function(){var e=Object(ge.d)([19.408318,52.121216]),n=new he.a({target:a.current,view:new Ee.a({constrainResolution:!0,center:e,zoom:6})});Object(Ne.a)(n,"https://api.maptiler.com/maps/76c95155-3672-495b-a1b0-e2cf76a359d6/style.json?key=GflTzOMvFDCYQ9RjOmMu"),n.on("click",(function(e){console.info(e.pixel);var a=Object(ge.l)(e.coordinate),n=Object(C.a)(a,2),r=n[0],l=n[1],o="lat=".concat(l,"&lng=").concat(r);window.setTimeout((function(){t.push({pathname:"/location",search:"?".concat(o)})}),400)}))}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"map",className:ye.a.FrontMap,ref:a}," "))})),je=t(122),Oe=t.n(je),ke=M.a.create({baseURL:"https://www.mapquestapi.com/geocoding/v1/"});function Ce(e){var a=Object(n.useState)(""),t=Object(C.a)(a,2),l=t[0],o=t[1],c=Object(n.useState)(!0),i=Object(C.a)(c,2),s=i[0],u=i[1],m=Object(n.useState)(!1),d=Object(C.a)(m,2),p=d[0],_=d[1],b=Object(n.useState)(null),v=Object(C.a)(b,2),h=v[0],E=v[1],g=function(e){var a=e.target.value,t=""!==a.trim();o(a),u(t)},N=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Oe.a.Wrapper},r.a.createElement("form",{className:["animate__animated","animate__bounceInDown","animate__fast"].join(" "),onSubmit:function(a){a.preventDefault();var t=e.history.push;if(l){_(!0);ke.get("address?key=".concat("xyDRoBak7eftOCqBEbiRd30Qm0u9K2Nr","&location=").concat(l)).then((function(e){var a=e.data.results[0].locations[0].latLng;_(!1);var n=[];Object.keys(a).forEach((function(e){n.push("".concat(encodeURIComponent(e),"=").concat(a[e]))})),console.log(n);var r=n.join("&");console.log(r),t({pathname:"/location",search:"?".concat(r)})})).catch((function(){_(!1),E(!0)}))}else u(!1)}},r.a.createElement(ve,{value:l,changed:g,label:"Click on map or type address:",blured:g,invalid:!s,validationFeedback:"This field cannot be empty",fieldId:"search"}),r.a.createElement(f,{addClass:"front",disabled:!s,icon:"fa fa-search",type:"submit",ariaLabel:"search"}))),r.a.createElement(we,null));return p?N=r.a.createElement(G,null):h&&(N=null),r.a.createElement("div",{className:Oe.a.Front},N)}Ce.defaultProps={history:null};var Le=H(Ce,ke),Me=t(107),Ie=t.n(Me),Be=function(){return r.a.createElement("div",{className:Ie.a.Wrapper},r.a.createElement("div",{className:Ie.a.Heading},"404"),r.a.createElement("div",{className:Ie.a.Subheading},"Page not found"))},Te=t(123),We=t.n(Te),Se=function(){var e=[We.a.About,"animate__animated","animate__bounceInDown","animate__fast"];return r.a.createElement("div",{className:e.join(" ")},r.a.createElement("header",null,r.a.createElement("h1",null,"Polly"),r.a.createElement("h2",null,"Check air pollution in your area")),r.a.createElement("p",null,"Polly is a web application that allows users to check air quality in their area. Air pollution is now considered to be the world's largest environmental health threat, accounting for 7 million deaths around the world every year. Air pollution causes and exacerbates a number of diseases, ranging from asthma to cancer, pulmonary illnesses and heart disease. Especially in Poland, country were I come from, air pollution is a big issue - we are one of the most polluted country in Europe because of energy managment based on fossil fuels."),r.a.createElement("footer",null,r.a.createElement("div",{className:We.a.Credits},r.a.createElement("p",null,"Created by"," ",r.a.createElement("span",null,r.a.createElement("a",{href:"https://twitter.com/DamianWrooby"},"Wrooby"))))))};var Re=function(){return r.a.createElement(c.a,null,r.a.createElement(j,null,r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/polly",exact:!0,component:Le}),r.a.createElement(i.a,{path:"/location",component:pe}),r.a.createElement(i.a,{path:"/about",component:Se}),r.a.createElement(i.a,{component:Be}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(305);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},57:function(e,a,t){e.exports={MeasurementBox:"MeasurementBox_MeasurementBox__13myC",Circles:"MeasurementBox_Circles__1dGVM",Wrap:"MeasurementBox_Wrap__3jZBE",Label:"MeasurementBox_Label__2KR_8",Tip:"MeasurementBox_Tip__1_rL7",Pollution:"MeasurementBox_Pollution__c2zwC"}},58:function(e,a,t){e.exports={AirQualityBox:"AirQualityBox_AirQualityBox__3H8-W",GradientLow:"AirQualityBox_GradientLow__2s8Hr",GradientMedium:"AirQualityBox_GradientMedium__J100F",GradientHigh:"AirQualityBox_GradientHigh__3u3SV",Index:"AirQualityBox_Index__34oGQ",Advice:"AirQualityBox_Advice__2N5N9"}},67:function(e,a,t){e.exports={Loader:"Loader_Loader__ANdA0",Circle:"Loader_Circle__Vzz5E",rotate:"Loader_rotate__3fyxQ",One:"Loader_One__2EbeA",Two:"Loader_Two__1Sh6N",Three:"Loader_Three__EwNwt"}},78:function(e,a,t){e.exports={Input:"Input_Input__3r5Ke",Label:"Input_Label__1qyHr",Invalid:"Input_Invalid__16Mis",Feedback:"Input_Feedback__1wyng",In:"Input_In__1UYsB"}},83:function(e,a,t){e.exports={Wrapper:"Layout_Wrapper__2JZNi",Main:"Layout_Main__Vm9LA",Content:"Layout_Content__3H3X8",Curved:"Layout_Curved__3IeoP"}},84:function(e,a,t){e.exports={Tooltip:"Tooltip_Tooltip__8WnFR",Label:"Tooltip_Label__1dZxq",Value:"Tooltip_Value__3YNht",Norm:"Tooltip_Norm__3OPwJ"}}},[[181,1,2]]]);
//# sourceMappingURL=main.5e3e854e.chunk.js.map