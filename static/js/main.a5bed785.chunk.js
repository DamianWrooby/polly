(this.webpackJsonppolly=this.webpackJsonppolly||[]).push([[0],{13:function(e,a,t){e.exports={Loader:"Loader_Loader__ANdA0",Circle:"Loader_Circle__Vzz5E",rotate:"Loader_rotate__3fyxQ",One:"Loader_One__2EbeA",Two:"Loader_Two__1Sh6N",Three:"Loader_Three__EwNwt"}},16:function(e,a,t){e.exports={Input:"Input_Input__3r5Ke",Label:"Input_Label__1qyHr",Sublabel:"Input_Sublabel__WaFjo",Invalid:"Input_Invalid__16Mis",Feedback:"Input_Feedback__1wyng",In:"Input_In__1UYsB"}},210:function(e,a,t){},211:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(84),o=t.n(l),i=(t(98),t(34)),c=t(1),s=t(50),u=t.n(s),m=function(e){return r.a.createElement("li",{className:u.a.NavigationItem},r.a.createElement(i.b,{to:e.link,activeClassName:u.a.active,exact:e.exact},e.children))},d=t(53),p=t.n(d),_=function(e){var a=e.type,t=e.icon,n=e.disabled,l=e.clicked,o=e.ariaLabel;return r.a.createElement("button",{type:a,disabled:n,onClick:l,"aria-label":o},r.a.createElement("div",{className:p.a.Wrapper},r.a.createElement("div",{className:p.a.Box},r.a.createElement("i",{className:t,"aria-hidden":"true"}))))};_.defaultProps={disabled:!1,type:"button",clicked:null};var h=_,v=t(86),f=t.n(v),b=function(){return r.a.createElement("ul",{className:f.a.NavigationItems},r.a.createElement(m,{link:"/polly",exact:!0},r.a.createElement(h,{icon:"fa fa-search",type:"button",ariaLabel:"search"})),r.a.createElement(m,{link:"/about"},r.a.createElement(h,{icon:"fa fa-info",type:"button",ariaLabel:"about"})))},E=t(54),g=t.n(E),y=function(){return r.a.createElement("header",{className:g.a.Topbar},r.a.createElement("div",{className:g.a.Watermark},"Polly"),r.a.createElement("nav",null,r.a.createElement(b,null)))},N=t(26),x=t.n(N),w=function(e){var a=e.children;return r.a.createElement("div",{className:x.a.Wrapper},r.a.createElement("main",{className:x.a.Main},r.a.createElement(y,null),r.a.createElement("div",{className:x.a.Curved},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320"},r.a.createElement("path",{fill:"rgb(246, 251, 253)",fillOpacity:"1",d:"M0,128L60,154.7C120,181,240,235,360,240C480,245,600,203,720,186.7C840,171,960,181,1080,202.7C1200,224,1320,256,1380,272L1440,288L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"}))),r.a.createElement("div",{className:x.a.Content},a)))},k=t(17),C=t(18),L=t(20),I=t(19),M=t(16),j=t.n(M),T=function(e){var a,t=e.value,n=e.changed,l=e.blured,o=e.label,i=e.sublabel,c=e.invalid,s=e.validationFeedback,u=e.fieldId,m=[],d=[j.a.Feedback];return c&&(m.push(j.a.Invalid),d.push(j.a.In)),a=r.a.createElement("input",{className:m.join(" "),value:t,onChange:n,onBlur:l}),r.a.createElement("div",{className:[j.a.Input]},r.a.createElement("label",{htmlFor:u},r.a.createElement("span",{className:j.a.Label},o),r.a.createElement("br",null),r.a.createElement("span",{className:j.a.Sublabel},i)),a,r.a.createElement("p",{className:d.join(" ")},s))};T.defaultProps={label:"",sublabel:"",invalid:!1,validationFeedback:""};var B=T,O=t(13),W=t.n(O),H=function(){return r.a.createElement("div",{className:W.a.Loader},r.a.createElement("div",{className:[W.a.Circle,W.a.One].join(" ")}),r.a.createElement("div",{className:[W.a.Circle,W.a.Two].join(" ")}),r.a.createElement("div",{className:[W.a.Circle,W.a.Three].join(" ")}))},A=t(87),S=t.n(A),P=function(e){var a=e.textElement,t=e.action,n=[S.a.ErrorMessage,"animate__animated","animate__bounceInDown","animate__fast"];return r.a.createElement("div",{className:n.join(" ")},a,r.a.createElement(h,{clicked:t,icon:"fa fa-step-backward",type:"button"}))},R=function(e,a){return function(t){Object(L.a)(l,t);var n=Object(I.a)(l);function l(e){var a;return Object(k.a)(this,l),(a=n.call(this,e)).goBackHandler=function(e){e.preventDefault(),window.location.reload(!1)},a.state={error:null},a}return Object(C.a)(l,[{key:"componentDidMount",value:function(){var e=this;this.reqInterceptor=a.interceptors.request.use((function(a){return e.setState({error:null}),a})),this.resInterceptor=a.interceptors.response.use((function(e){return e}),(function(a){e.setState({error:a},(function(){var a=e.state.error;console.log(a)}))}))}},{key:"componentWillUnmount",value:function(){a.interceptors.request.eject(this.reqInterceptor),a.interceptors.response.eject(this.resInterceptor)}},{key:"render",value:function(){var a=this.state.error?r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{textElement:r.a.createElement("p",null,this.state.error.message,r.a.createElement("br",null),"Try to search another loaction."),action:this.goBackHandler})):null;return r.a.createElement(r.a.Fragment,null,a,r.a.createElement(e,this.props))}}]),l}(n.Component)},V=t(88),D=t.n(V),F=t(12),G=t.n(F),U=G.a.create({baseURL:"https://www.mapquestapi.com/geocoding/v1/"}),Q=R(function(e){Object(L.a)(t,e);var a=Object(I.a)(t);function t(e){var n;return Object(k.a)(this,t),(n=a.call(this,e)).inputChangedHandler=function(e){var a=e.target.value,t=n.checkValidity(a);n.setState({query:a,valid:t})},n.checkValidity=function(e){return""!==e.trim()},n.searchHandler=function(e){if(e.preventDefault(),n.state.query){n.setState({loading:!0});U.get("address?key=".concat("xyDRoBak7eftOCqBEbiRd30Qm0u9K2Nr","&location=").concat(n.state.query)).then((function(e){var a=e.data.results[0].locations[0].latLng;n.setState({loading:!1,location:a});var t=[];for(var r in n.state.location)t.push(encodeURIComponent(r)+"="+n.state.location[r]);var l=t.join("&");n.props.history.push({pathname:"/location",search:"?"+l})})).catch((function(e){n.setState({loading:!1,error:!0})}))}else n.setState({valid:!1})},n.state={query:"",valid:!0,location:{lat:null,lng:null},loading:!1,error:null},n}return Object(C.a)(t,[{key:"render",value:function(){var e=r.a.createElement("form",{className:["animate__animated","animate__bounceInDown","animate__fast"].join(" "),onSubmit:this.searchHandler},r.a.createElement(B,{value:this.state.query,changed:this.inputChangedHandler,blured:this.inputChangedHandler,label:"Type your location ",sublabel:"e.g. Mariacka, Gda\u0144sk, Poland",invalid:!this.state.valid,validationFeedback:"This field cannot be empty",fieldId:"search"}),r.a.createElement(h,{disabled:!this.state.valid,icon:"fa fa-search",type:"submit",ariaLabel:"search"}));return this.state.loading?e=r.a.createElement(H,null):this.state.error&&(e=null),r.a.createElement("div",{className:D.a.Front},e)}}]),t}(n.Component),U),q=t(56),K=t(89),Y=t(23),J=t(36),Z=t.n(J),z=t(37),X=t.n(z),$=function(e){var a,t=e.location,n=e.time;a=t.street?"".concat(t.street,", ").concat(t.adminArea5,", ").concat(t.adminArea1):"".concat(t.adminArea5,", ").concat(t.adminArea1);var l=new Date(n.from),o=new Date(n.till),i=l.toLocaleString().split(":");i.pop();var c=i.join(":"),s=o.toLocaleString().split(" ");s.shift();var u=s[0].split(":");u.pop();var m=u.join(":"),d="".concat(c," - ").concat(m);return r.a.createElement("div",{className:[X.a.MeasurementInfo,"animate__animated","animate__bounceInDown"].join(" ")},r.a.createElement("p",null,r.a.createElement("span",{className:X.a.LocationLabel},"Location:"),r.a.createElement("br",null)," ",a),r.a.createElement("p",null,r.a.createElement("span",{className:X.a.LocationLabel},"Measurement time:"),r.a.createElement("br",null)," ",d))},ee=t(38),ae=t.n(ee),te=t(90),ne=function(e){var a=e.chartData,t=e.width,n=e.height,l=e.options;return r.a.createElement(te.a,{data:a,width:t,height:n,options:l})},re=t(27),le=t.n(re),oe=function(e){var a=e.label,t=e.value,n=e.maxValue,l=n?r.a.createElement("p",{className:le.a.Norm},"WHO norm: ",n," \xb5g/m\xb3"):r.a.createElement("p",{className:le.a.Norm},"WHO norm: none");return r.a.createElement("div",null,r.a.createElement("p",{className:le.a.Label},a," "),r.a.createElement("p",{className:le.a.Value},t," "),l)},ie=function(e){var a=e.label,t=e.value,n=e.maxValue,l=n?t/n*100:null,o="#6eb6ff",i="#90f2ff";l>50?o="#ff6200":l>80?o="#ff4000":l>100&&(i="#ff0000"),console.log(l);var c={datasets:[{data:[t,n],backgroundColor:[o,i],borderWidth:0}],labels:["Current","Norm"],backgroundColor:["#000124","#123411"],options:{tooltips:{enabled:!1},responsive:!0,cutoutPercentage:90,legend:{display:!1}}};return r.a.createElement("div",{className:ae.a.MeasurementCircle},r.a.createElement("div",{className:ae.a.Tooltip},r.a.createElement(oe,{label:a,value:t,maxValue:n})),r.a.createElement("h2",{className:ae.a.Label},a),r.a.createElement(ne,{chartData:c,width:90,height:90,options:c.options}))},ce=t(92),se=t.n(ce),ue=function(e){var a,t,n=e.label,l=e.value;switch(n){case"TEMPERATURE":a="\xb0C";break;case"HUMIDITY":a="%";break;case"PRESSURE":a="hPa";break;case"WIND":a="km/h";break;default:a=""}switch(n){case"TEMPERATURE":t="fa fa-thermometer-half";break;case"HUMIDITY":t="fa fa-tint";break;case"PRESSURE":t="fa fa-arrow-down";break;default:t=""}var o="".concat(l).concat(a);return r.a.createElement("div",{className:se.a.WeatherCircle},r.a.createElement("i",{className:t,"aria-hidden":"true"}),r.a.createElement("p",null,o))},me=t(8),de=t.n(me);ie.defaultProps={data:null,tip:""};var pe=function(e){var a,t=e.type,n=e.label,l=e.data,o=e.tip,i=[];switch(t){case"pollution":for(var c in l)null!==l[c].value&&i.push({label:c,value:l[c].value,maxValue:l[c].maxValue});var s=[de.a.MeasurementBox,"animate__animated","animate__bounceInUp"],u=[de.a.Circles,de.a.Pollution];i.length>3&&u.push(de.a.Wrap),a=0!==i.length?r.a.createElement("div",{className:s.join(" ")},r.a.createElement("h2",{className:de.a.Label},n),r.a.createElement("p",{className:de.a.Tip},o),r.a.createElement("div",{className:u.join(" ")},i.map((function(e){return r.a.createElement(ie,{key:e.label,label:e.label,value:e.value,maxValue:e.maxValue})})))):null;break;case"weather":for(var m in l)null!==l[m].value&&i.push({label:m,value:l[m].value});a=0!==i.length?r.a.createElement("div",{className:de.a.MeasurementBox},r.a.createElement("div",{className:de.a.Label},n),r.a.createElement("div",{className:de.a.Circles},i.map((function(e){return r.a.createElement(ue,{key:e.label,label:e.label,value:e.value})})))):null;break;default:a=r.a.createElement("p",null,"No measurement content")}return r.a.createElement(r.a.Fragment,null,a)},_e=t(9),he=t.n(_e),ve=function(e){var a,t=e.index,n=t?r.a.createElement("div",{className:he.a.Index},r.a.createElement("p",null,r.a.createElement("span",null,"Pollution level: "),t.level.toLowerCase().replace("_"," "))):null,l=[he.a.AirQualityBox,"animate__animated","animate__bounceInDown","animate__fast"];switch(t.level){case"VERY_LOW":a="Take a deep breath!",l.push(he.a.GradientLow);break;case"LOW":a="You can go for a walk.",l.push(he.a.GradientLow);break;case"MEDIUM":a="You can go for a walk but you should not.",l.push(he.a.GradientMedium);break;case"HIGH":a="Better stay at home.",l.push(he.a.GradientHigh);break;case"VERY_HIGH":a="Stay at home and close all of the windows",l.push(he.a.GradientHigh);break;case"UNKNOWN":a="Sorry. No sensors in this area.",l.push(he.a.GradientLow);break;default:a=""}var o=r.a.createElement("div",{className:he.a.Advice},r.a.createElement("p",null,a));return r.a.createElement("div",{className:l.join(" ")},n,o)},fe=R(function(e){Object(L.a)(t,e);var a=Object(I.a)(t);function t(e){var n;return Object(k.a)(this,t),(n=a.call(this,e)).goBackHandler=function(e){e.preventDefault(),n.props.history.goBack()},n.state={location:{coordinates:{},info:{}},time:{from:"",till:""},index:{},measurements:{},loading:!0,error:!1},n}return Object(C.a)(t,[{key:"componentDidMount",value:function(){var e,a=this,t=new URLSearchParams(this.props.location.search),n={coordinates:{},info:{}},r=Object(Y.a)({},n.coordinates),l=Object(K.a)(t.entries());try{for(l.s();!(e=l.n()).done;){var o=e.value,i=Object(q.a)(o,2);r[o[0]]=i[1]}}catch(u){l.e(u)}finally{l.f()}n.coordinates=r,this.setState({location:n});var c=G.a.get("https://www.mapquestapi.com/geocoding/v1/reverse?key=".concat("xyDRoBak7eftOCqBEbiRd30Qm0u9K2Nr","&location=").concat(n.coordinates.lat,",").concat(n.coordinates.lng)),s=G.a.get("https://airapi.airly.eu/v2/measurements/nearest?lat=".concat(n.coordinates.lat,"&lng=").concat(n.coordinates.lng,"&maxDistanceKM=").concat("1000","&apikey=").concat("E5uVHwAJDcdy1YKj9x05zTgKtaxMKgAk"));G.a.all([c,s]).then(G.a.spread((function(){var e=arguments.length<=0?void 0:arguments[0],t=arguments.length<=1?void 0:arguments[1];console.log(t.data);var r=Object(Y.a)({},n.info),l=Object(q.a)(e.data.results[0].locations,1);r=l[0],n.info=r;var o=t.data.current.indexes[0],i={from:"",till:""};i.from=t.data.current.fromDateTime,i.till=t.data.current.tillDateTime;for(var c=t.data.current.values,s={},u=0;u<c.length;u+=1)s[c[u].name]=c[u].value;var m={dust:{PM1:{value:null,maxValue:null},PM25:{value:null,maxValue:25},PM10:{value:null,maxValue:50}},gases:{NO2:{value:null,maxValue:200},SO2:{value:null,maxValue:350},CO:{value:null,maxValue:3e4},O3:{value:null,maxValue:100}},weather:{TEMPERATURE:{value:null},HUMIDITY:{value:null},PRESSURE:{value:null}}},d=Object(Y.a)({},m.dust),p=Object(Y.a)({},m.gases),_=Object(Y.a)({},m.weather),h=[d,p,_];h.forEach((function(e){Object.keys(e).forEach((function(a){Object.keys(s).forEach((function(t){a===t&&(e[a].value=s[t])}))}))})),m={dust:d,gases:p,weather:_},a.setState({loading:!1,location:n,time:i,index:o,measurements:m},(function(){console.log(a.state)}))}))).catch((function(e){a.setState({loading:!1,error:!0}),console.log(e)}))}},{key:"render",value:function(){var e=this.state.location.info,a=this.state.time,t=this.state.index,n=this.state.measurements.dust,l=this.state.measurements.gases,o=this.state.measurements.weather,i=this.state.loading,c=this.state.error,s=r.a.createElement("div",{className:Z.a.Content},r.a.createElement($,{location:e,time:a}),r.a.createElement(ve,{index:t}),r.a.createElement("div",{className:[Z.a.Measurements,"animate__animated","animate__bounceInUp"].join(" ")},r.a.createElement(pe,{type:"pollution",label:"Dust",data:n,tip:"Tap for more information"}),r.a.createElement(pe,{type:"pollution",label:"Gases",data:l,tip:"Tap for more information"}),r.a.createElement(pe,{type:"weather",label:"Weather",data:o})));return i?s=r.a.createElement(H,null):c&&(s=r.a.createElement(P,{textElement:r.a.createElement("p",null,"Cannot find this location.",r.a.createElement("br",null),"Try another one."),action:this.goBackHandler})),r.a.createElement("div",{className:Z.a.Results},s)}}]),t}(n.Component),G.a),be=t(39),Ee=t.n(be),ge=function(){return r.a.createElement("div",{className:Ee.a.Wrapper},r.a.createElement("div",{className:Ee.a.Heading},"404"),r.a.createElement("div",{className:Ee.a.Subheading},"Page not found"))},ye=t(55),Ne=t.n(ye),xe=function(){var e=[Ne.a.About,"animate__animated","animate__bounceInDown","animate__fast"];return r.a.createElement("div",{className:e.join(" ")},r.a.createElement("h1",null,"Polly"),r.a.createElement("h2",null,"Check air pollution in your area"),r.a.createElement("p",null,"Polly is a web application that allows users to check air quality in their area. Air pollution is now considered to be the world's largest environmental health threat, accounting for 7 million deaths around the world every year. Air pollution causes and exacerbates a number of diseases, ranging from asthma to cancer, pulmonary illnesses and heart disease. Especially in Poland, country were I come from, air pollution is a big issue - we are one of the most polluted country in Europe because of energy managment based on fossil fuels."),r.a.createElement("div",{className:Ne.a.Credits},r.a.createElement("p",null,"Created by"," ",r.a.createElement("span",null,r.a.createElement("a",{href:"https://twitter.com/DamianWrooby"},"Wrooby")))))};var we=function(){return r.a.createElement(i.a,null,r.a.createElement(w,null,r.a.createElement(c.c,null,r.a.createElement(c.a,{path:"/polly",exact:!0,component:Q}),r.a.createElement(c.a,{path:"/location",component:fe}),r.a.createElement(c.a,{path:"/about",component:xe}),r.a.createElement(c.a,{component:ge}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(210);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(we,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},26:function(e,a,t){e.exports={Wrapper:"Layout_Wrapper__2JZNi",Main:"Layout_Main__Vm9LA",Content:"Layout_Content__3H3X8",Curved:"Layout_Curved__3IeoP"}},27:function(e,a,t){e.exports={Tooltip:"Tooltip_Tooltip__8WnFR",Label:"Tooltip_Label__1dZxq",Value:"Tooltip_Value__3YNht",Norm:"Tooltip_Norm__3OPwJ"}},36:function(e,a,t){e.exports={Results:"Results_Results__2iKBZ",Content:"Results_Content__2i24J",Measurements:"Results_Measurements__3u5QI"}},37:function(e,a,t){e.exports={MeasurementInfo:"MeasurementInfo_MeasurementInfo__ViLpV",LocationLabel:"MeasurementInfo_LocationLabel__1-JH5"}},38:function(e,a,t){e.exports={MeasurementCircle:"MeasurementCircle_MeasurementCircle__2GR0W",Label:"MeasurementCircle_Label__3cQkE",Tooltip:"MeasurementCircle_Tooltip__3b9D8","chartjs-render-monitor":"MeasurementCircle_chartjs-render-monitor__1dgUW"}},39:function(e,a,t){e.exports={Wrapper:"NotFound_Wrapper__2ch6H",Heading:"NotFound_Heading__1mLti",Subheading:"NotFound_Subheading__2lYrG"}},50:function(e,a,t){e.exports={NavigationItem:"NavigationItem_NavigationItem__2SpXc"}},53:function(e,a,t){e.exports={Wrapper:"Button_Wrapper__QmTcQ",Box:"Button_Box__2imEP"}},54:function(e,a,t){e.exports={Topbar:"Topbar_Topbar__2WmOK",Watermark:"Topbar_Watermark__3HIvQ"}},55:function(e,a,t){e.exports={About:"About_About__scHdH",Credits:"About_Credits__2_w3X"}},8:function(e,a,t){e.exports={MeasurementBox:"MeasurementBox_MeasurementBox__13myC",Circles:"MeasurementBox_Circles__1dGVM",Wrap:"MeasurementBox_Wrap__3jZBE",Label:"MeasurementBox_Label__2KR_8",Tip:"MeasurementBox_Tip__1_rL7",Pollution:"MeasurementBox_Pollution__c2zwC"}},86:function(e,a,t){e.exports={NavigationItems:"NavigationItems_NavigationItems__1fnFX"}},87:function(e,a,t){e.exports={ErrorMessage:"ErrorMessage_ErrorMessage__3tVxx"}},88:function(e,a,t){e.exports={Front:"Front_Front__3AH4P"}},9:function(e,a,t){e.exports={AirQualityBox:"AirQualityBox_AirQualityBox__3H8-W",GradientLow:"AirQualityBox_GradientLow__2s8Hr",GradientMedium:"AirQualityBox_GradientMedium__J100F",GradientHigh:"AirQualityBox_GradientHigh__3u3SV",Index:"AirQualityBox_Index__34oGQ",Advice:"AirQualityBox_Advice__2N5N9"}},92:function(e,a,t){e.exports={WeatherCircle:"WeatherCircle_WeatherCircle__2kwP8"}},93:function(e,a,t){e.exports=t(211)},98:function(e,a,t){}},[[93,1,2]]]);
//# sourceMappingURL=main.a5bed785.chunk.js.map